# Claude Night Pilot 排程建立完整指導手冊

## 🚀 快速開始指南

### 1. 啟動 GUI 應用程式

#### 方法一：完整開發模式 (推薦)
```bash
npm run tauri dev
```
- ✅ **優點**: 完整的 Tauri 桌面應用程式體驗
- ✅ **功能**: 所有 Rust 後端功能完整可用
- ⚠️ **需要**: Rust 環境和依賴完整安裝

#### 方法二：前端獨立模式
```bash
npm run dev:frontend
```
- ✅ **優點**: 快速啟動，適合 UI 測試
- ⚠️ **限制**: 某些後端功能可能不可用

#### 方法三：靜態伺服器模式
```bash
python3 -m http.server 8081 --directory src
```
- ✅ **優點**: 最簡單的啟動方式
- ⚠️ **限制**: 純前端展示，無後端功能

### 2. 存取應用程式
- **桌面應用**: Tauri 會自動開啟桌面視窗
- **網頁版本**: 開啟瀏覽器前往 `http://localhost:8081`

## 📅 排程建立詳細步驟

### Step 1: 進入排程頁面
1. 在左側導航欄找到「排程」圖示 📅
2. 點擊切換到排程任務頁面
3. 確認頁面載入完成，看到「排程任務」標題

### Step 2: 開啟建立對話框
1. 點擊右上角的藍色「+」浮動動作按鈕
2. 建立排程對話框會彈出
3. 確認對話框標題為「建立排程任務」

### Step 3: 填寫基本資訊

#### 🏷️ 任務名稱
```
範例：每日早安報告
範例：週報生成任務  
範例：系統健康檢查
```

#### 📝 選擇 Prompt
- 從下拉選單選擇已建立的 Prompt
- 如果沒有可用的 Prompt，需要先到 Prompt 頁面建立

#### 🕐 設定 Cron 表達式
**格式**: `分 時 日 月 週`

**常用範例**:
```bash
# 每日執行
0 9 * * *          # 每日 9:00
0 18 * * *         # 每日 18:00  
30 14 * * *        # 每日 14:30

# 每週執行
0 9 * * 1          # 每週一 9:00
0 18 * * 5         # 每週五 18:00
0 0 * * 0          # 每週日午夜

# 每月執行  
0 0 1 * *          # 每月 1 號午夜
0 9 15 * *         # 每月 15 號 9:00

# 高頻執行
*/15 * * * *       # 每 15 分鐘
0 */2 * * *        # 每 2 小時
0 9-17 * * 1-5     # 工作日每小時
```

### Step 4: 提交建立
1. 檢查所有欄位是否填寫正確
2. 點擊「建立」按鈕
3. 等待成功通知訊息

### Step 5: 驗證排程
1. 排程對話框會自動關閉
2. 在排程任務列表中確認新任務出現
3. 檢查任務狀態和執行時間

## 🔧 Cron 表達式詳解

### 基本格式
```
┌───────────── 分鐘 (0 - 59)
│ ┌─────────── 小時 (0 - 23)
│ │ ┌───────── 日期 (1 - 31)
│ │ │ ┌─────── 月份 (1 - 12)
│ │ │ │ ┌───── 星期 (0 - 7) (0 和 7 都代表週日)
│ │ │ │ │
* * * * *
```

### 特殊字符說明
- `*` : 匹配任意值
- `,` : 分隔多個值 (例如: `1,3,5`)
- `-` : 表示範圍 (例如: `1-5`)
- `/` : 表示間隔 (例如: `*/10` 表示每10單位)

### 實用範例庫

#### 📈 商務應用
```bash
# 工作日早會提醒
0 9 * * 1-5        # 週一到週五 9:00

# 週報生成
0 18 * * 5         # 每週五 18:00

# 月末總結
0 23 28-31 * *     # 月末 23:00
```

#### 🖥️ 系統維護  
```bash
# 夜間備份
0 2 * * *          # 每日 2:00

# 系統檢查
*/30 * * * *       # 每 30 分鐘

# 日誌清理
0 0 1 * *          # 每月 1 號午夜
```

#### 📱 用戶互動
```bash
# 早安問候
0 8 * * *          # 每日 8:00

# 晚安提醒
0 22 * * *         # 每日 22:00

# 週末娛樂
0 10 * * 6,0       # 週六週日 10:00
```

## 🎯 排程管理最佳實踐

### ✅ 建立前檢查清單
- [ ] 確認 Prompt 內容已準備好
- [ ] 驗證 Cron 表達式語法正確
- [ ] 考慮 Claude API 使用限制
- [ ] 設定合理的執行頻率
- [ ] 準備錯誤處理預案

### 🕐 時間設定建議
1. **避開高峰時段**: 不要在 API 使用高峰期排程
2. **考慮時區**: 確認時間設定符合您的時區
3. **錯開執行**: 多個任務不要同時執行
4. **預留緩衝**: 給任務執行預留足夠時間

### 📊 監控和維護
1. **定期檢查**: 查看排程執行狀況
2. **調整頻率**: 根據需要修改執行頻率
3. **清理無用**: 及時刪除不需要的排程
4. **備份配置**: 重要排程做好備份

## 🔍 故障排除指南

### 🚨 常見問題

#### 問題 1: 排程對話框不顯示
**可能原因**: 
- JavaScript 未載入完成
- DOM 元素未找到

**解決方案**:
```javascript
// 等待頁面完全載入
document.addEventListener('DOMContentLoaded', function() {
    // 重新嘗試點擊建立按鈕
});
```

#### 問題 2: Cron 表達式驗證失敗
**可能原因**:
- 格式不正確
- 數值超出範圍

**解決方案**:
- 使用在線 Cron 驗證器檢查語法
- 參考上面的範例進行修正

#### 問題 3: 排程未執行
**可能原因**:
- Claude API 達到限制
- 系統時間不正確
- 任務被暫停

**檢查步驟**:
1. 查看系統監控頁面的 API 狀態
2. 確認系統時間正確
3. 檢查任務狀態是否為啟用

### 🛠️ 開發者調試

#### 瀏覽器控制台檢查
```javascript
// 檢查 API 連接
window.apiClient.healthCheck();

// 查看排程列表
window.apiClient.listJobs();

// 手動測試 Cron 解析
window.cronParser.parse('0 9 * * *');
```

#### Tauri 後端日誌
```bash
# 開啟詳細日誌
TAURI_DEBUG=1 npm run tauri dev

# 檢查特定模組
RUST_LOG=claude_night_pilot=debug npm run tauri dev
```

## 📱 進階功能使用

### 🔄 批量操作
1. 選擇多個排程任務
2. 使用批量啟用/停用功能
3. 批量修改執行時間

### 📈 任務模板
1. 將常用的排程設定儲存為模板
2. 快速複製和修改現有排程
3. 匯入/匯出排程配置

### 🎨 自定義通知
1. 設定任務執行成功/失敗通知
2. 選擇通知方式 (桌面通知/電子郵件)
3. 配置通知內容模板

## 🎉 恭喜！

您已經掌握了 Claude Night Pilot 排程功能的完整使用方法！

**接下來可以**:
- 🚀 建立您的第一個自動化任務
- 📊 設定定期報告生成
- 🤖 配置智能助手排程
- 🔄 探索更多自動化可能性

**需要幫助時**:
- 📖 查看 [CLAUDE.md](CLAUDE.md) 開發指南
- 🐛 在 [GitHub Issues](https://github.com/s123104/claude-night-pilot/issues) 回報問題  
- 💡 分享您的使用經驗和改進建議

---

**祝您使用愉快！夜間自動打工仔為您服務 24/7！** 🌙✨