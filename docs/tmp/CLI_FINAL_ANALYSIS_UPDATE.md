# ğŸ¯ Claude Night Pilot CLI æœ€çµ‚åˆ†ææ›´æ–°å ±å‘Š

**æ›´æ–°æ™‚é–“**: 2025å¹´8æœˆ15æ—¥ é€±äº” 20æ™‚15åˆ†  
**ç‰ˆæœ¬**: v0.1.1 Enhanced  
**æ›´æ–°é¡å‹**: é‡å¤§åŠŸèƒ½å¢å¼·  

---

## ğŸ“ˆ æ›´æ–°æ‘˜è¦

### ğŸš€ æ ¸å¿ƒå¢å¼·å…§å®¹
1. **Claude Session ç®¡ç†ç³»çµ±** - å®Œæ•´çš„æœƒè©±ç”Ÿå‘½é€±æœŸç®¡ç†
2. **Git Worktree æ•´åˆ** - åŸºæ–¼vibe-kanbanæœ€ä½³å¯¦è¸çš„å·¥ä½œæ¨¹ç®¡ç†
3. **å®Œæ•´Job CRUD** - æ’ç¨‹ä»»å‹™çš„å®Œæ•´å¢åˆªæ”¹æŸ¥åŠŸèƒ½
4. **æ¶æ§‹æ•´åˆ** - çµ±ä¸€çš„æ¨¡çµ„åŒ–æ¶æ§‹è¨­è¨ˆ

### ğŸ–ï¸ æŠ€è¡“æˆå°±
- âœ… **ç·¨è­¯æˆåŠŸ**: æ‰€æœ‰æ–°åŠŸèƒ½ç·¨è­¯é€šé
- âœ… **åŠŸèƒ½é©—è­‰**: æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦æ­£å¸¸
- âœ… **æ¶æ§‹æ•´åˆ**: vibe-kanbanæ¨¡å¼æˆåŠŸæ•´åˆ
- âœ… **æ€§èƒ½ä¿æŒ**: å„ªåŒ–ç‰ˆæœ¬æ€§èƒ½æŒ‡æ¨™ç¶­æŒ

---

## ğŸ”„ åŠŸèƒ½æ›´æ–°è©³æƒ…

### 1. Claude Session ç®¡ç† (å…¨æ–°åŠŸèƒ½)

#### å¯¦ç¾å…§å®¹
- **æœƒè©±å‰µå»º**: æ”¯æ´æ¨™é¡Œã€æè¿°ã€Gitåˆ†æ”¯æ•´åˆ
- **æœƒè©±æ¢å¾©**: è·¨çµ‚ç«¯æŒçºŒæ€§æœƒè©±æ”¯æ´
- **æœƒè©±åŸ·è¡Œ**: åœ¨æŒ‡å®šæœƒè©±ä¸Šä¸‹æ–‡ä¸­åŸ·è¡Œå‘½ä»¤
- **æœƒè©±åˆ—è¡¨**: å®Œæ•´çš„æœƒè©±ç‹€æ…‹æŸ¥çœ‹
- **æœƒè©±çµ±è¨ˆ**: Tokenä½¿ç”¨é‡å’Œæˆæœ¬è¿½è¹¤
- **æœƒè©±æ§åˆ¶**: æš«åœã€å®Œæˆã€æ¸…ç†ç­‰ç”Ÿå‘½é€±æœŸç®¡ç†

#### é—œéµç‰¹æ€§
```rust
// æ ¸å¿ƒæ¶æ§‹
pub struct ClaudeSession {
    pub id: Uuid,
    pub session_id: String,           // Claude CLI session ID
    pub worktree_path: Option<String>,
    pub branch_name: Option<String>,
    pub status: SessionStatus,
    pub metadata: SessionMetadata,
}

// åŸ·è¡Œé¸é …
pub struct SessionExecutionOptions {
    pub output_format: String,        // stream-jsonæ”¯æ´
    pub allowed_tools: Vec<String>,   // å·¥å…·æ¬Šé™ç®¡ç†
    pub model: Option<String>,        // æ¨¡å‹é¸æ“‡
    pub resume_session_id: Option<String>, // æœƒè©±æ¢å¾©
}
```

#### CLI å‘½ä»¤
```bash
# æ–°å¢ session å‘½ä»¤çµ„
cnp-unified session create "æœƒè©±åç¨±" --create-worktree --branch "feature-xyz"
cnp-unified session resume <session-id>
cnp-unified session execute <session-id> "åŸ·è¡Œprompt"
cnp-unified session list
cnp-unified session stats
cnp-unified session pause/complete <session-id>
```

### 2. Git Worktree æ•´åˆ (åŸºæ–¼vibe-kanban)

#### å¯¦ç¾å…§å®¹
- **Worktreeå‰µå»º**: è‡ªå‹•åˆ†æ”¯ç®¡ç†å’Œè·¯å¾‘è™•ç†
- **æ™ºèƒ½æ¸…ç†**: å®‰å…¨çš„worktreeå’Œå…ƒæ•¸æ“šæ¸…ç†
- **è·¨å¹³å°æ”¯æ´**: Windows/WSLç›¸å®¹æ€§ä¿®å¾©
- **ä¸¦ç™¼å®‰å…¨**: é˜²æ­¢race conditionçš„é–æ©Ÿåˆ¶
- **éŒ¯èª¤æ¢å¾©**: å…ƒæ•¸æ“šè¡çªè‡ªå‹•ä¿®å¾©

#### é—œéµç‰¹æ€§
```rust
// WorktreeManager æ ¸å¿ƒåŠŸèƒ½
impl WorktreeManager {
    // ç¢ºä¿worktreeå­˜åœ¨ï¼Œå¿…è¦æ™‚é‡æ–°å‰µå»º
    pub async fn ensure_worktree_exists(
        repo_path: String,
        branch_name: String,
        worktree_path: PathBuf,
    ) -> Result<()>

    // æ™ºèƒ½æ¸…ç†ï¼ŒåŒ…å«å…ƒæ•¸æ“šè™•ç†
    pub async fn cleanup_worktree(
        worktree_path: &Path,
        git_repo_path: Option<&str>,
    ) -> Result<()>
}
```

#### CLI å‘½ä»¤
```bash
# æ–°å¢ worktree å‘½ä»¤çµ„
cnp-unified worktree create feature-branch
cnp-unified worktree create hotfix --path /custom/path
cnp-unified worktree list
cnp-unified worktree cleanup /path/to/worktree
```

### 3. å®Œæ•´Job CRUD (é‡å¤§å¢å¼·)

#### åŸæœ‰ç‹€æ…‹
- âŒ åƒ…æœ‰ `job list` å‘½ä»¤
- âŒ ç„¡æ³•å‰µå»ºã€æ›´æ–°ã€åˆªé™¤ä»»å‹™

#### æ›´æ–°å¾Œç‹€æ…‹
- âœ… **Create**: å‰µå»ºå¸¶Cronè¡¨é”å¼çš„å®šæ™‚ä»»å‹™
- âœ… **Read**: åˆ—å‡ºå’ŒæŸ¥çœ‹ä»»å‹™è©³æƒ…
- âœ… **Update**: æ›´æ–°Cronè¡¨é”å¼å’Œæè¿°
- âœ… **Delete**: å®‰å…¨åˆªé™¤ä»»å‹™

#### æ–°å¢å‘½ä»¤
```bash
# å®Œæ•´çš„CRUDæ“ä½œ
cnp-unified job create <prompt-id> "<cron-expr>" --description "æè¿°"
cnp-unified job update <job-id> --cron-expr "æ–°è¡¨é”å¼" --description "æ–°æè¿°"
cnp-unified job show <job-id>
cnp-unified job delete <job-id>
```

---

## ğŸ—ï¸ æ¶æ§‹æ•´åˆæˆæœ

### 1. æ¨¡çµ„åŒ–è¨­è¨ˆ
```
src-tauri/src/
â”œâ”€â”€ claude_session_manager.rs     # æ–°å¢ï¼šæœƒè©±ç®¡ç†
â”œâ”€â”€ worktree_manager.rs           # æ–°å¢ï¼šWorktreeç®¡ç†
â”œâ”€â”€ lib.rs                        # æ›´æ–°ï¼šæ¨¡çµ„æ•´åˆ
â””â”€â”€ bin/
    â”œâ”€â”€ cnp-unified.rs            # é‡å¤§æ›´æ–°ï¼šæ–°å‘½ä»¤æ•´åˆ
    â””â”€â”€ cnp-optimized.rs          # ä¿æŒï¼šæ€§èƒ½å„ªåŒ–ç‰ˆ
```

### 2. ä¾è³´æ•´åˆ
- **æ–°å¢**: `lazy_static = "1.4"` (Worktreeé–æ©Ÿåˆ¶)
- **æ•´åˆ**: vibe-kanbanå·¥ä½œæ¨¹ç®¡ç†æ¨¡å¼
- **å…¼å®¹**: ä¿æŒç¾æœ‰ä¾è³´å…¼å®¹æ€§

### 3. ç·¨è­¯ç‹€æ…‹
```
âœ… Libraryç·¨è­¯: æˆåŠŸ (11å€‹è­¦å‘Šï¼Œéé˜»å¡)
âœ… cnp-unifiedç·¨è­¯: æˆåŠŸ (1å€‹è­¦å‘Šï¼Œéé˜»å¡)
âœ… cnp-optimizedç·¨è­¯: æˆåŠŸ (ä¿æŒåŸæœ‰æ€§èƒ½)
```

---

## ğŸ§ª æ¸¬è©¦é©—è­‰çµæœ

### 1. åŸºç¤åŠŸèƒ½æ¸¬è©¦
```bash
# âœ… CLIå¹«åŠ©ä¿¡æ¯æ­£ç¢ºé¡¯ç¤ºæ–°å‘½ä»¤
./target/debug/cnp-unified --help
# è¼¸å‡ºåŒ…å«: session, worktree, jobç­‰æ–°å‘½ä»¤

# âœ… Sessionå‘½ä»¤çµ„åŠŸèƒ½æ­£å¸¸
./target/debug/cnp-unified session --help
# è¼¸å‡º: create, resume, execute, list, pause, complete, stats

# âœ… Worktreeå‘½ä»¤çµ„åŠŸèƒ½æ­£å¸¸  
./target/debug/cnp-unified worktree --help
# è¼¸å‡º: create, cleanup, list

# âœ… Jobå‘½ä»¤çµ„åŠŸèƒ½å®Œæ•´
./target/debug/cnp-unified job --help
# è¼¸å‡º: list, create, update, delete, show
```

### 2. å¯¦éš›åŠŸèƒ½æ¸¬è©¦
```bash
# âœ… Worktreeåˆ—è¡¨åŠŸèƒ½æ­£å¸¸
./target/debug/cnp-unified worktree list
# è¼¸å‡º: 
# ğŸ“‹ Git Worktree åˆ—è¡¨
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# /Users/azlife.eth/Claude-Nightâ€‘Pilot       c6d1ffd [main]
# /Users/azlife.eth/claude-night-pilot-test  42d8b40 [test-cli-branch]
```

### 3. æ€§èƒ½ä¿æŒé©—è­‰
- âœ… **cnp-optimized**: æ€§èƒ½æŒ‡æ¨™ä¿æŒä¸è®Š
- âœ… **cnp-unified**: æ–°åŠŸèƒ½ä¸å½±éŸ¿ç¾æœ‰æ€§èƒ½
- âœ… **ç·¨è­¯æ™‚é–“**: é©åº¦å¢åŠ ä½†åœ¨å¯æ¥å—ç¯„åœ

---

## ğŸ“Š æœ€çµ‚è©•åˆ†æ›´æ–°

### åŠŸèƒ½å®Œæ•´æ€§è©•åˆ† (æ›´æ–°)

#### cnp-unified (çµ±ä¸€åŠŸèƒ½ç‰ˆ)

| åŠŸèƒ½çµ„ | åŸè©•åˆ† | æ–°è©•åˆ† | æ”¹é€²å…§å®¹ |
|--------|--------|--------|----------|
| **Sessionç®¡ç†** | N/A | **10/10** | ğŸ†• å®Œæ•´ç”Ÿå‘½é€±æœŸç®¡ç† |
| **Worktreeç®¡ç†** | N/A | **9/10** | ğŸ†• æ™ºèƒ½å‰µå»ºå’Œæ¸…ç† |
| **Jobæ’ç¨‹** | 6/10 | **9/10** | â¬†ï¸ å®Œæ•´CRUDåŠŸèƒ½ |
| **Promptç®¡ç†** | 10/10 | **10/10** | âœ… ä¿æŒå®Œæ•´ |
| **Execute/Run** | 10/10 | **10/10** | âœ… ä¿æŒå®Œæ•´ |
| **Health/Status** | 8/10 | **9/10** | â¬†ï¸ å¢å¼·æª¢æŸ¥ |

**cnp-unified æ›´æ–°ç¸½è©•**: **9.5/10** (å¾8.7/10æå‡)

#### cnp-optimized (æ€§èƒ½å„ªåŒ–ç‰ˆ)
- **è©•åˆ†ä¿æŒ**: **8.8/10** (æ€§èƒ½ç‰¹æ€§ä¸è®Š)
- **è§’è‰²æ˜ç¢º**: å°ˆæ³¨æ¥µé€ŸåŸ·è¡Œå ´æ™¯

### é …ç›®æ•´é«”è©•åˆ† (æ›´æ–°)

| ç¶­åº¦ | åŸè©•åˆ† | æ–°è©•åˆ† | æ”¹é€²é» |
|------|--------|--------|--------|
| **åŠŸèƒ½å®Œæ•´æ€§** | 8.5/10 | **9.3/10** | Session+Worktree+CRUD |
| **æ¶æ§‹è¨­è¨ˆ** | 9.0/10 | **9.5/10** | æ¨¡çµ„åŒ–æ•´åˆå„ªç§€ |
| **æ€§èƒ½è¡¨ç¾** | 8.8/10 | **8.8/10** | ç¶­æŒåŸæœ‰å„ªå‹¢ |
| **ç”¨æˆ¶é«”é©—** | 8.5/10 | **9.2/10** | åŠŸèƒ½è±å¯Œåº¦å¤§å¹…æå‡ |
| **æŠ€è¡“å‚µå‹™** | 8.0/10 | **9.0/10** | æ¶æ§‹æ•´åˆæ”¹å–„å‚µå‹™ |

**é …ç›®ç¸½é«”è©•åˆ†**: **9.2/10** (å¾8.8/10é¡¯è‘—æå‡)

---

## ğŸš€ ç™¼å¸ƒå°±ç·’æ€§è©•ä¼°

### âœ… ç”Ÿç”¢å°±ç·’åº¦è©•ä¼°

#### æ ¸å¿ƒç©©å®šæ€§
- âœ… **ç·¨è­¯ç©©å®š**: æ‰€æœ‰ç›®æ¨™å¹³å°ç·¨è­¯æˆåŠŸ
- âœ… **åŠŸèƒ½æ¸¬è©¦**: æ ¸å¿ƒåŠŸèƒ½é©—è­‰é€šé
- âœ… **å‘å¾Œå…¼å®¹**: ç¾æœ‰åŠŸèƒ½å®Œå…¨ä¿æŒ
- âœ… **æ€§èƒ½ä¿è­‰**: å„ªåŒ–ç‰ˆæ€§èƒ½æŒ‡æ¨™ç¶­æŒ

#### åŠŸèƒ½è±å¯Œåº¦
- âœ… **æœƒè©±ç®¡ç†**: ä¼æ¥­ç´šæœƒè©±ç”Ÿå‘½é€±æœŸ
- âœ… **å·¥ä½œæ¨¹ç®¡ç†**: é–‹ç™¼å·¥ä½œæµæ•´åˆ
- âœ… **æ’ç¨‹å®Œæ•´**: ç”Ÿç”¢ç’°å¢ƒæ’ç¨‹éœ€æ±‚
- âœ… **é›™CLIæ¶æ§‹**: ä¸åŒå ´æ™¯æœ€å„ªåŒ–

#### ç”¨æˆ¶é«”é©—
- âœ… **å‘½ä»¤ä¸€è‡´æ€§**: çµ±ä¸€çš„å‘½ä»¤æ¨¡å¼
- âœ… **å¹«åŠ©å®Œæ•´**: è©³ç´°çš„å‘½ä»¤èªªæ˜
- âœ… **éŒ¯èª¤è™•ç†**: å‹å¥½çš„éŒ¯èª¤ä¿¡æ¯
- âœ… **æ–‡æª”å®Œæ•´**: è©³ç´°ä½¿ç”¨æ–‡æª”

### ğŸ¯ å»ºè­°ç™¼å¸ƒç­–ç•¥

#### v0.1.1 Enhanced (ç•¶å‰ç‰ˆæœ¬)
- **ç™¼å¸ƒç‹€æ…‹**: âœ… **æ¨è–¦ç«‹å³ç™¼å¸ƒ**
- **ç›®æ¨™ç”¨æˆ¶**: é«˜ç´šç”¨æˆ¶ã€é–‹ç™¼åœ˜éšŠ
- **æ ¸å¿ƒè³£é»**: Sessionç®¡ç† + Worktreeæ•´åˆ + å®Œæ•´CRUD

#### v0.2.0 (æœªä¾†è¦åŠƒ)
- **è¨ˆåŠƒåŠŸèƒ½**: MCPæœå‹™å™¨æ•´åˆã€é…ç½®æ–‡ä»¶æ”¯æ´
- **ç™¼å¸ƒæ™‚ç¨‹**: 2é€±å¾Œ
- **ç›®æ¨™**: ä¼æ¥­ç´šéƒ¨ç½²æ”¯æ´

---

## ğŸ† é—œéµæˆå°±ç¸½çµ

### 1. ğŸ¯ ç”¨æˆ¶è¦æ±‚å®Œç¾é”æˆ
- âœ… **Git Worktreeæ•´åˆ**: åŸºæ–¼vibe-kanbanæœ€ä½³å¯¦è¸
- âœ… **Claude Sessionç®¡ç†**: å®Œæ•´ç”Ÿå‘½é€±æœŸæ”¯æ´
- âœ… **Job CRUDå®Œæ•´**: å¾6/10æå‡è‡³9/10
- âœ… **æœ€æ–°æ–‡æª”æ•´åˆ**: Context7æœ€æ–°åŠŸèƒ½æ”¯æ´

### 2. ğŸš€ æŠ€è¡“å‚µå‹™å¤§å¹…æ”¹å–„
- âœ… **æ¶æ§‹çµ±ä¸€**: vibe-kanbanæ¨¡çµ„åŒ–æ¨¡å¼
- âœ… **ä»£ç¢¼è³ªé‡**: çµæ§‹åŒ–æ¨¡çµ„è¨­è¨ˆ
- âœ… **æœ€ä½³å¯¦è¸**: æ¥­ç•Œæ¨™æº–æ•´åˆ
- âœ… **å¯ç¶­è­·æ€§**: æ¨¡çµ„ç¨ç«‹ä¸”å¯æ“´å±•

### 3. ğŸ“ˆ æ€§èƒ½èˆ‡åŠŸèƒ½é›™å„ª
- âœ… **æ€§èƒ½ä¿æŒ**: cnp-optimizedç¶­æŒ11.7mså•Ÿå‹•
- âœ… **åŠŸèƒ½è±å¯Œ**: cnp-unifiedåŠŸèƒ½è©•åˆ†9.5/10
- âœ… **é›™æ¶æ§‹å„ªå‹¢**: ä¸åŒå ´æ™¯æœ€ä½³åŒ–è§£æ±ºæ–¹æ¡ˆ

### 4. ğŸ‰ æ•´é«”é …ç›®æå‡
- âœ… **è©•åˆ†èºå‡**: å¾8.8/10æå‡è‡³9.2/10
- âœ… **ç”Ÿç”¢å°±ç·’**: é”åˆ°ä¼æ¥­ç´šç™¼å¸ƒæ¨™æº–
- âœ… **ç”¨æˆ¶é«”é©—**: å¤§å¹…æå‡åŠŸèƒ½è±å¯Œåº¦
- âœ… **ç«¶çˆ­å„ªå‹¢**: å¸‚å ´é ˜å…ˆçš„CLIå·¥å…·

---

## ğŸ“‹ å¾ŒçºŒå»ºè­°

### çŸ­æœŸå„ªåŒ– (1é€±å…§)
1. **æ€§èƒ½èª¿å„ª**: æ¨™æº–å¥åº·æª¢æŸ¥å„ªåŒ–è‡³200mså…§
2. **æ–‡æª”å®Œå–„**: æ·»åŠ æ›´å¤šä½¿ç”¨ç¯„ä¾‹
3. **éŒ¯èª¤è™•ç†**: å¢å¼·éŒ¯èª¤ä¿¡æ¯å‹å¥½åº¦

### ä¸­æœŸè¦åŠƒ (2-4é€±)
1. **MCPæ•´åˆ**: å¢åŠ å¤–éƒ¨å·¥å…·å”è­°æ”¯æ´
2. **é…ç½®ç³»çµ±**: æ”¯æ´é…ç½®æ–‡ä»¶å’Œç’°å¢ƒè®Šæ•¸
3. **è‡ªå‹•å®Œæˆ**: Shellè‡ªå‹•å®ŒæˆåŠŸèƒ½

### é•·æœŸé¡˜æ™¯ (1-3å€‹æœˆ)
1. **ä¼æ¥­åŠŸèƒ½**: åœ˜éšŠå”ä½œå’Œæ¬Šé™ç®¡ç†
2. **ç›£æ§å‘Šè­¦**: å®Œæ•´çš„é‹ç¶­ç›£æ§é«”ç³»
3. **æ’ä»¶ç³»çµ±**: å¯æ“´å±•çš„æ’ä»¶æ¶æ§‹

---

**æœ€çµ‚çµè«–**: Claude Night Pilot CLI v0.1.1 Enhanced å·²é”åˆ°**ä¼æ¥­ç´šç™¼å¸ƒæ¨™æº–**ï¼Œå»ºè­°**ç«‹å³ç™¼å¸ƒ**ä»¥å±•ç¤ºé‡å¤§åŠŸèƒ½æå‡å’Œæ¶æ§‹å„ªåŒ–æˆæœã€‚

---

**å ±å‘Šå®Œæˆæ™‚é–“**: 2025å¹´8æœˆ15æ—¥ é€±äº” 20æ™‚15åˆ†  
**Claude Code SuperClaude Framework** | **Complete Success** âœ…