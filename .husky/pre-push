#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# åŸ·è¡Œå®Œæ•´çš„ Rust æ¸¬è©¦
echo "ğŸ” Running Rust tests..."
npm run test:rust
if [ $? -ne 0 ]; then
    echo "âŒ Rust tests failed. Push aborted."
    exit 1
fi

# åŸ·è¡Œå®Œæ•´çš„ Playwright E2E æ¸¬è©¦
echo "ğŸ” Running Playwright E2E tests..."
npm test
if [ $? -ne 0 ]; then
    echo "âŒ E2E tests failed. Push aborted."
    exit 1
fi

echo "âœ… All checks passed. Pushing to remote..."
exit 0

